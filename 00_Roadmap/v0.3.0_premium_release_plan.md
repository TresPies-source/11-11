# v0.3.0 Premium: "Intelligence & Foundation"

**Release Theme:** Deploy the Dojo Genesis agent architecture with research-backed patterns and deep implementations  
**Timeline:** Flexible until excellence achieved (estimated 6-8 weeks)  
**Parallel Execution:** 2 Zenflow instances at a time  
**Excellence Focus:** Stability (10/10), Research Integration (10/10), Depth (10/10)

---

## Release Philosophy

v0.3.0 is the **"Wonder of Engineering"** release that brings the Dojo Genesis ecosystem online. Every feature must demonstrate:

- **Complete implementations** (no MVP compromises)
- **Research-backed patterns** (Dataiku, enterprise best practices)
- **Technical excellence** (clean architecture, extensible design)
- **Rock-solid stability** (zero regressions, comprehensive error handling)

This is not a "ship fast" release. This is a **"ship excellent"** release.

---

## The 10 Features (Organized by Parallelization Waves)

### Wave 1: Foundation (Parallel Execution)

#### Feature 1: Supervisor Router (Agent Connect Pattern)
**Branch:** `feature/supervisor-router`  
**Zenflow Instance:** #1  
**Duration:** 2-3 weeks  
**Dependencies:** None

**Description:**
Deploy the Supervisor as the single conversational entry point that routes queries to specialized agents using description-based routing.

**Key Capabilities:**
1. **Agent Registry** - JSON-based registry with agent descriptions
2. **Description-Based Routing** - LLM-based selection (GPT-4o-mini)
3. **Handoff Patterns** - Dojo → Librarian, Dojo → Debugger
4. **Context Preservation** - Full Harness Trace passed between agents
5. **Fallback Logic** - Default to Dojo Agent when routing fails
6. **Cost Tracking** - Per-query budget for routing decisions

**Research Integration:**
- Implements Dataiku's Agent Connect pattern
- Description-based routing (not keyword matching)
- Single entry point prevents agent sprawl

**Depth Criteria:**
- Handles all routing edge cases (ambiguous queries, multi-agent needs)
- Comprehensive error handling (routing failures, agent unavailability)
- Extensible registry (easy to add new agents)
- Complete documentation (architecture, API, usage examples)

**Excellence Rubric:**
- Stability: 10/10 (zero routing failures)
- Research Integration: 10/10 (pure Agent Connect implementation)
- Depth: 10/10 (complete, extensible, documented)
- Performance: 8/10 (routing adds <200ms latency)
- Parallelization: 10/10 (zero dependencies)

---

#### Feature 2: Cost Guard (Three-Tier Budgeting)
**Branch:** `feature/cost-guard`  
**Zenflow Instance:** #2  
**Duration:** 2-3 weeks  
**Dependencies:** None

**Description:**
Implement comprehensive cost management with query, session, and user-level budgets to prevent runaway LLM costs.

**Key Capabilities:**
1. **Per-Query Budget** - Estimate tokens before execution, warn at 80%, stop at 100%
2. **Per-Session Budget** - Track cumulative tokens, warn/stop at thresholds
3. **Per-User Budget** - Monthly tracking with rollover, warn/stop at thresholds
4. **Cost Estimation** - Pre-flight token estimation for all operations
5. **Budget Dashboard** - Real-time cost tracking UI
6. **Cost-Aware Mode Selection** - Prefer cheaper modes when budget is low

**Research Integration:**
- Implements Dataiku's Cost Guard pattern
- Three-tier budgeting (query/session/user)
- Proactive cost management (not reactive)

**Depth Criteria:**
- Accurate token estimation (within 10% of actual)
- Graceful degradation (cheaper modes when budget low)
- Complete budget tracking (all LLM calls logged)
- User-friendly dashboard (clear cost breakdown)

**Excellence Rubric:**
- Stability: 10/10 (never exceeds budget)
- Research Integration: 10/10 (pure Cost Guard implementation)
- Depth: 10/10 (complete, accurate, user-friendly)
- Performance: 9/10 (estimation adds <50ms)
- Parallelization: 10/10 (zero dependencies)

---

### Wave 2: Intelligence (Sequential, After Wave 1)

#### Feature 3: Librarian Agent (Semantic Search & Retrieval)
**Branch:** `feature/librarian-agent`  
**Zenflow Instance:** #1  
**Duration:** 3-4 weeks  
**Dependencies:** Supervisor Router (must exist first)

**Description:**
Deploy the Librarian Agent to enable semantic search across seed patches, project memory, and the Global Commons.

**Key Capabilities:**
1. **Semantic Search (Connect)** - Natural language search via Supabase Vector (pgvector)
2. **Seed Patch Indexing** - Automatic indexing of all seed patches with embeddings
3. **Project Memory Search** - Search across JOURNAL.md, task_plan.md, BUGS.md
4. **Proactive Suggestions (Analyze)** - Suggest relevant seeds during Dojo sessions
5. **Artifact Retrieval (Recommend)** - "Find similar prompts" functionality
6. **Search UI** - Beautiful search interface with filters and previews

**Research Integration:**
- Implements Dataiku's Librarian pattern (Connect + Analyze + Recommend)
- Semantic search (not keyword matching)
- Proactive suggestions (not just reactive search)

**Depth Criteria:**
- High-quality search results (80%+ relevance)
- Fast search (<1s latency)
- Comprehensive indexing (all seeds, memory, artifacts)
- Beautiful, intuitive search UI
- Extensible (easy to add new search sources)

**Excellence Rubric:**
- Stability: 10/10 (search never fails)
- Research Integration: 10/10 (pure Librarian pattern)
- Depth: 10/10 (complete, fast, beautiful)
- Performance: 9/10 (search <1s)
- Usability: 8/10 (intuitive search UI)
- Parallelization: 8/10 (depends on Supervisor)

---

#### Feature 4: Harness Trace (Nested JSON Logging)
**Branch:** `feature/harness-trace`  
**Zenflow Instance:** #2  
**Duration:** 2-3 weeks  
**Dependencies:** None (but integrates with Supervisor + Librarian)

**Description:**
Implement the Harness Trace system for comprehensive logging of all agent operations, enabling full traceability and debugging.

**Key Capabilities:**
1. **Nested JSON Schema** - Span-based logging with parent-child relationships
2. **Event Types** - MODE_TRANSITION, TOOL_INVOCATION, PERSPECTIVE_INTEGRATION, etc.
3. **Context Capture** - Inputs, outputs, metadata for every event
4. **Cost Tracking** - Token counts, cost estimates, duration for every span
5. **Trace Storage** - Persistent storage in Supabase
6. **Trace Retrieval** - API for fetching traces by session/user/date

**Research Integration:**
- Implements Dataiku's traceability pattern
- Nested spans (not flat logs)
- Inspectable at every hop

**Depth Criteria:**
- Comprehensive logging (every significant event captured)
- Efficient storage (compressed JSON, indexed queries)
- Fast retrieval (<500ms for full trace)
- Complete documentation (schema, event types, usage)

**Excellence Rubric:**
- Stability: 10/10 (logging never fails)
- Research Integration: 10/10 (pure traceability pattern)
- Depth: 10/10 (complete, efficient, documented)
- Performance: 9/10 (minimal overhead <10ms per event)
- Parallelization: 10/10 (zero dependencies)

---

### Wave 3: Infrastructure (After Wave 2)

#### Feature 5: Multi-Model LLM Infrastructure (DeepSeek 3.2 Primary)
**Branch:** `feature/multi-model-llm`  
**Zenflow Instance:** #1  
**Duration:** 1-2 weeks  
**Dependencies:** Features 1, 2, 3, 4 (Wave 1 & 2 must be complete)  
**Strategy:** "All In" on DeepSeek 3.2 as primary LLM provider

**Description:**
Build a multi-model LLM infrastructure that uses **DeepSeek 3.2 as the primary LLM provider** for all agents, with GPT-4o-mini as fallback only. DeepSeek 3.2 is a "reasoning-first model built for agents" with competitive performance and 20-35% cost savings.

**Key Capabilities:**
1. **Model Registry** - deepseek-chat, deepseek-reasoner, gpt-4o-mini (fallback)
2. **Unified LLM Client** - Single interface for all LLM calls (OpenAI-compatible)
3. **DeepSeek Primary** - All agents use DeepSeek 3.2 by default
4. **Automatic Fallback** - Falls back to GPT-4o-mini only if DeepSeek unavailable
5. **Cost Tracking** - Integrates with Cost Guard for per-model cost tracking
6. **Event Logging** - Integrates with Harness Trace for model selection events
7. **Agent Refactoring** - Updates Supervisor, Librarian, Cost Guard to use llmClient

**Research Integration:**
- DeepSeek 3.2 is agent-native (trained on 1,800+ agent environments, 85K+ instructions)
- Competitive performance (benchmarks show parity with GPT-4o, Claude-3.5)
- Cost optimization (20-35% cheaper than GPT-4o-mini with cache)
- Two-tier strategy (deepseek-chat for general, deepseek-reasoner for complex reasoning)

**Depth Criteria:**
- Complete multi-model system (registry, client, refactored agents)
- DeepSeek 3.2 is first-class choice (not budget option)
- Graceful fallback (no failures if DeepSeek unavailable)
- Cost tracking integrated with Cost Guard
- Event logging integrated with Harness Trace
- Comprehensive documentation (architecture, API, usage, setup)

**Excellence Rubric:**
- Stability: 10/10 (zero LLM call failures, graceful fallbacks)
- Depth: 10/10 (complete, integrated, documented)
- Agent Optimization: 10/10 (DeepSeek 3.2 is agent-native)
- Parallelization: 10/10 (easy to add new models)
- Performance: 9/10 (no added latency from abstraction)
- Usability: 9/10 (simple API, easy setup)

---

#### Feature 6: Hierarchical Context Management (4-Tier System)
**Branch:** `feature/context-management`  
**Zenflow Instance:** #1  
**Duration:** 2-3 weeks  
**Dependencies:** Cost Guard (for budget-aware pruning)

**Description:**
Implement the 4-tier context management system to aggressively manage the context window and reduce the "context re-feed tax."

**Key Capabilities:**
1. **Tier 1 (Always On)** - Core system prompt, Dojo principles, current query
2. **Tier 2 (On Demand)** - Active seed patches, relevant project memory
3. **Tier 3 (When Referenced)** - Full text of specific files or logs
4. **Tier 4 (Pruned Aggressively)** - General conversation history, less relevant details
5. **Budget-Aware Pruning** - Prune more aggressively when budget is low
6. **Context Dashboard** - Real-time view of what's in context

**Research Integration:**
- Implements Dataiku's "Context Iceberg" pattern
- Hierarchical pruning (not flat truncation)
- Budget-aware (adapts to cost constraints)

**Depth Criteria:**
- Intelligent pruning (preserves important context)
- Transparent to user (dashboard shows what's in context)
- Efficient (reduces token usage by 30-50%)
- Extensible (easy to add new tiers)

**Excellence Rubric:**
- Stability: 10/10 (never loses critical context)
- Research Integration: 10/10 (pure Context Iceberg)
- Depth: 10/10 (complete, intelligent, transparent)
- Performance: 9/10 (reduces token usage significantly)
- Parallelization: 8/10 (depends on Cost Guard)

---

#### Feature 7: Safety Switch (Fallback to Conservative Mode)
**Branch:** `feature/safety-switch`  
**Zenflow Instance:** #2  
**Duration:** 1-2 weeks  
**Dependencies:** None

**Description:**
Implement the Safety Switch that automatically falls back to a conservative mode when errors, conflicts, or budget issues occur.

**Key Capabilities:**
1. **Error Detection** - Detect LLM errors, API failures, parsing errors
2. **Conflict Detection** - Detect conflicting perspectives or assumptions
3. **Budget Detection** - Detect budget exhaustion or approaching limits
4. **Conservative Mode** - Simplified Dojo mode with minimal LLM calls
5. **User Notification** - Clear messaging about why Safety Switch activated
6. **Recovery Path** - Easy path back to normal mode

**Research Integration:**
- Implements Dataiku's Safety Switch pattern
- Graceful degradation (not hard failures)
- User-friendly error handling

**Depth Criteria:**
- Comprehensive error detection (all failure modes covered)
- Smooth fallback (no jarring transitions)
- Clear user communication (why and how to recover)
- Complete logging (all Safety Switch activations traced)

**Excellence Rubric:**
- Stability: 10/10 (prevents catastrophic failures)
- Research Integration: 10/10 (pure Safety Switch pattern)
- Depth: 10/10 (complete, smooth, clear)
- Usability: 9/10 (user-friendly error handling)
- Parallelization: 10/10 (zero dependencies)

---

### Wave 4: User Experience (Parallel Execution)

#### Feature 8: DojoPacket Schema & Export
**Branch:** `feature/dojopacket-export`  
**Zenflow Instance:** #1  
**Duration:** 1-2 weeks  
**Dependencies:** Harness Trace (for trace summary)

**Description:**
Implement the DojoPacket schema and export functionality to enable portable, shareable session outputs.

**Key Capabilities:**
1. **Packet Schema** - Standardized JSON format for session outputs
2. **Export Formats** - JSON, Markdown, PDF (via manus-md-to-pdf)
3. **Copy to Clipboard** - One-click copy of formatted packet
4. **Share Link** - Generate shareable link to packet (optional)
5. **Import Packet** - Resume session from imported packet
6. **Packet History** - View all exported packets

**Research Integration:**
- Implements Dojo Protocol's DojoPacket standard
- Portable format (works across tools)
- Shareable (enables collaboration)

**Depth Criteria:**
- Complete schema (all session data captured)
- Multiple export formats (JSON, Markdown, PDF)
- Beautiful formatting (readable, professional)
- Easy import/export (one-click)

**Excellence Rubric:**
- Stability: 10/10 (export never fails)
- Research Integration: 10/10 (pure DojoPacket standard)
- Depth: 10/10 (complete, beautiful, easy)
- Usability: 9/10 (one-click export)
- Parallelization: 8/10 (depends on Harness Trace)

---

#### Feature 8: Agent Status & Activity Indicators
**Branch:** `feature/agent-status-ui`  
**Zenflow Instance:** #2  
**Duration:** 1-2 weeks  
**Dependencies:** Supervisor Router, Librarian Agent

**Description:**
Implement beautiful, real-time status indicators that show which agent is active and what it's doing.

**Key Capabilities:**
1. **Agent Avatar** - Visual indicator of active agent (Supervisor, Dojo, Librarian)
2. **Activity Messages** - "Librarian is searching..." "Dojo is reflecting..."
3. **Progress Indicators** - Animated progress for long operations
4. **Handoff Visualization** - Show when Supervisor hands off to another agent
5. **Trace Breadcrumbs** - Show the path through agents (Supervisor → Librarian → Dojo)
6. **Cost Indicator** - Real-time token usage for current operation

**Research Integration:**
- Implements transparency pattern (user sees what's happening)
- Real-time feedback (not just "loading...")
- Trust-building (inspectable agent behavior)

**Depth Criteria:**
- Beautiful animations (smooth, professional)
- Clear messaging (users understand what's happening)
- Real-time updates (no lag)
- Accessible (works with screen readers)

**Excellence Rubric:**
- Stability: 9/10 (always shows accurate status)
- Beauty: 9/10 (smooth animations, polished)
- Usability: 10/10 (clear, helpful, accessible)
- Depth: 9/10 (complete, real-time, beautiful)
- Parallelization: 7/10 (depends on Supervisor + Librarian)

---

### Wave 5: Foundation Features (Parallel Execution)

#### Feature 9: Seed Patch Management UI
**Branch:** `feature/seed-management-ui`  
**Zenflow Instance:** #1  
**Duration:** 2 weeks  
**Dependencies:** None

**Description:**
Implement a beautiful UI for managing seed patches (Keep/Grow/Compost/Replant) with search, filtering, and visualization.

**Key Capabilities:**
1. **Seed Library** - View all seed patches with metadata
2. **Keep/Grow/Compost/Replant** - Visual sorting interface (drag-and-drop)
3. **Seed Search** - Search seeds by name, type, or content
4. **Seed Filters** - Filter by status, type, date
5. **Seed Details** - View full seed with "why it matters" and "revisit when"
6. **Memory Patch Export** - Generate Memory Patch for replanted seeds

**Research Integration:**
- Implements Dojo Protocol's Memory Garden pattern
- Visual sorting (not just text lists)
- Consent-based replanting (user controls memory)

**Depth Criteria:**
- Beautiful, intuitive UI (drag-and-drop, smooth animations)
- Fast search and filtering (<500ms)
- Complete seed metadata (all fields captured)
- Easy export (one-click Memory Patch)

**Excellence Rubric:**
- Stability: 9/10 (seed operations never fail)
- Beauty: 9/10 (smooth animations, polished)
- Usability: 10/10 (intuitive, accessible)
- Depth: 9/10 (complete, fast, beautiful)
- Parallelization: 10/10 (zero dependencies)

---

#### Feature 10: Agent Descriptions & Registry UI
**Branch:** `feature/agent-registry-ui`  
**Zenflow Instance:** #2  
**Duration:** 1 week  
**Dependencies:** Supervisor Router

**Description:**
Implement a UI for viewing and managing agent descriptions in the registry, enabling users to understand what each agent does.

**Key Capabilities:**
1. **Agent Cards** - Visual cards for each agent (Supervisor, Dojo, Librarian, Debugger)
2. **Agent Descriptions** - Clear "purpose, when to use, what it doesn't do"
3. **Agent Status** - Online/offline, last used, usage stats
4. **Test Agent** - One-click test of agent routing
5. **Edit Descriptions** - Admin UI for updating agent descriptions
6. **Registry Export** - Export registry as JSON

**Research Integration:**
- Implements transparency pattern (users see agent capabilities)
- Description-based routing (clear agent boundaries)
- Extensible registry (easy to add new agents)

**Depth Criteria:**
- Beautiful agent cards (icons, colors, animations)
- Clear descriptions (users understand agent roles)
- Easy testing (one-click agent test)
- Admin-friendly (easy to update descriptions)

**Excellence Rubric:**
- Stability: 9/10 (registry operations never fail)
- Beauty: 8/10 (polished agent cards)
- Usability: 9/10 (clear, intuitive)
- Depth: 9/10 (complete, extensible)
- Parallelization: 8/10 (depends on Supervisor Router)

---

## Parallelization Strategy

### Wave 1 (Weeks 1-3): Foundation
- **Zenflow #1:** Supervisor Router
- **Zenflow #2:** Cost Guard
- **Merge:** Week 3 (both complete)

### Wave 2 (Weeks 4-7): Intelligence
- **Zenflow #1:** Librarian Agent (depends on Supervisor)
- **Zenflow #2:** Harness Trace (independent)
- **Merge:** Week 7 (both complete)

### Wave 3 (Weeks 5-7): Infrastructure
- **Zenflow #1:** Context Management (depends on Cost Guard)
- **Zenflow #2:** Safety Switch (independent)
- **Merge:** Week 7 (both complete)

### Wave 4 (Weeks 8-9): User Experience
- **Zenflow #1:** DojoPacket Export (depends on Harness Trace)
- **Zenflow #2:** Agent Status UI (depends on Supervisor + Librarian)
- **Merge:** Week 9 (both complete)

### Wave 5 (Weeks 9-10): Foundation Features
- **Zenflow #1:** Seed Management UI (independent)
- **Zenflow #2:** Agent Registry UI (depends on Supervisor)
- **Merge:** Week 10 (both complete)

**Total Duration:** 8-10 weeks (flexible until excellence achieved)

---

## Success Criteria

### Must Have (Excellent: 9-10/10)
- ✅ Stability: All features rock-solid, zero regressions
- ✅ Research Integration: All Dataiku patterns implemented correctly
- ✅ Depth: All features complete, no MVP compromises

### Must Have (Very Good: 7-8/10)
- ✅ Performance: Fast, responsive, optimized
- ✅ Parallelization: Features developed concurrently with minimal conflicts
- ✅ Usability: Intuitive, accessible, error-preventing

### Can Be Good (6-7/10)
- ✅ Creativity: Solid implementations, not necessarily novel
- ✅ Beauty: Clean, consistent, not necessarily stunning

---

## Deferred to v0.4.0

- Debugger Agent (conflict resolution)
- Trace Explorer UI (three-view visualization)
- Semantic search across all prompts (not just seeds)
- Automated tagging
- Prompt recommendations

---

**Author:** Manus AI (Dojo)  
**Status:** v0.3.0 Premium Release Plan  
**Date:** January 12, 2026
